# –û —Ñ–∞–π–ª–∞—Ö

* –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –≤—Å—ë –µ—Å—Ç—å —Ñ–∞–π–ª - –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –û–°
* –ù–µ –≤—Å—ë –µ—Å—Ç—å —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–æ–∫–µ—Ç—ã - —Ö–æ—Ç—è –∏–º–µ—é—Ç —Å—Ö–æ–∂–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –¢–∏–ø—ã
* –†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã -
* –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ d
* –ñ–µ—Å—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏ - –∫–∞—É–Ω—Ç–µ—Ä –≤ inode
* (–ø—Å–µ–≤–¥–æ-—Ç–∏–ø) —Å–∏–º–≤–æ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ - –Ω–∞ –ø—É—Ç—å
* –§–∞–π–ª—ã-–¥—ã—Ä–∫–∏ —Ç–∏–ø–∞ /dev/null, /dev/zero –∏–ª–∏ —Ñ–∞–π–ª—ã –≤ /proc 

### inode
–º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª–µ–π, –≤–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ:
```
...
 unsigned long           i_ino;          /* –Ω–æ–º–µ—Ä –∏–Ω–¥–µ–∫—Å–∞ */
 atomic_t                i_count;        /* —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ */
 umode_t                 i_mode;         /* –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ */
 unsigned int            i_nlink;        /* –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–µ—Å—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ */
 uid_t                   i_uid; /* –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–≤–ª–∞–¥–µ–ª—å—Ü–∞ */
 gid_t                   i_gid; /* –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≥—Ä—É–ø–ø—ã-–≤–ª–∞–¥–µ–ª—å—Ü–∞ */
 kdev_t                  i_rdev;         /* —Å–≤—è–∑–∞–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ */
 loff_t                  i_size;         /* —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö */
 ...
```

–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è - –ø–æ —Å—É—Ç–∏ —Ç–∞–±–ª–∏—Ü–∞: –∏–º—è_—Ñ–∞–π–ª–∞::–Ω–æ–º–µ—Ä_node.

–ü–æ–º–∏–º–æ –æ–±—ã—á–Ω—ã—Ö –ø—Ä–∞–≤ –≤ –º–∞—Å–∫–µ rwx –µ—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—ã–µ —á–µ—Ä–µ–∑ chmod:
- suid - –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- sgid - –≥—Ä—É–ø–ø–µ
- sticky –±–∏—Ç - —Å–µ–π—á–∞—Å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –∫–∞—Ç–∞–ª–æ–≥—É, –Ω–∞–ø—Ä–∏–º–µ—Ä –∫ —à–∞—Ä–µ: –∫–∞–∂–¥—ã–π –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ñ–∞–π–ª—ã –∏ —Ç.–ø.


## ext4
–ó–∞—Å—á—ë—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è —è–¥—Ä–∞ Virtual File System –∏–º–µ–µ–º –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–æ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–æ–≤—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏, –≤ —Ç–æ–º —á–∏—Å–ª–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ —Ç–∏–ø–∞ ramfs, proc –∏ —Ç.–¥.

* superblock - –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ, –Ω–∞ –∫–∞–∂–¥—É—é –≥—Ä—É–ø–ø—É –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è
–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –º–Ω–æ–≥–æ –ø–æ–ª–µ–π: 

``` 
/*00*/  __le32  s_inodes_count;         /* Inodes count */
  __le32  s_blocks_count_lo;      /* Blocks count */
  __le32  s_r_blocks_count_lo;    /* Reserved blocks count */
  __le32  s_free_blocks_count_lo; /* Free blocks count */
/*10*/  __le32  s_free_inodes_count;    /* Free inodes count */
  __le32  s_first_data_block;     /* First Data Block */
  ...
```
–∞ —Ç–∞–∫–∂–µ –¥–∞–Ω–Ω—ã–µ –æ –≤—Ä–µ–º–µ–Ω–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–ø–∏—Å–∏, –∫—Ç–æ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª, —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –∏ —Ç.–¥.
* group description - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –≥—Ä—É–ø–ø–µ, –∏—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö;
—Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ö–æ–∂–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≥—Ä—É–ø–ø—É –±–ª–æ–∫–æ–≤, –∞ —Ç–∞–∫–∂–µ –¥—Ä—É–≥–∏–µ,
–Ω–∞–ø—Ä–∏–º–µ—Ä used_dirs_count
* block bitmap
* inode bitmap
* inode table - —Å–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ —Ç–∞–±–ª–∏—á–Ω—ã–º–∏ –≤–ª–æ–∂–µ–Ω–∏—è–º–∏ ( –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö).
—Ä–∞–∑–º–µ—Ä –∞–π–Ω–æ–¥—ã - 128–±–∞–π—Ç
* data

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
### üîπ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏ –¥–∏—Å–∫–æ–≤
```bash
# disk free
df -h # —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π
df -i # –ø—Ä–æ –∞–π–Ω–æ–¥—ã
df -T # —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
```
| –ö–æ–º–∞–Ω–¥–∞                | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                         | –ü—Ä–∏–º–µ—Ä                                                         |
| ---------------------- | ---------------------------------- |----------------------------------------------------------------|
| `df`                   | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞     | `df -h` <br> `df -i # –ø—Ä–æ –∞–π–Ω–æ–¥—ã` <br> `df -T # —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π` |
| `du`                   | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤/–∫–∞—Ç–∞–ª–æ–≥–æ–≤ | `du -sh /home/alex`                                            |
| `mount`                | –°–ø–∏—Å–æ–∫ —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –§–°           | `mount`                                                        |
| `cat /proc/mounts`     | –¢–æ–∂–µ —Å–ø–∏—Å–æ–∫ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –§–°       | `cat /proc/mounts`                                             |
| `lsblk`                | –î–µ—Ä–µ–≤–æ –±–ª–æ–∫–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤          | `lsblk -f`                                                     |
| `blkid`                | UUID –∏ —Ç–∏–ø –§–° –Ω–∞ —Ä–∞–∑–¥–µ–ª–∞—Ö          | `blkid /dev/sda2`                                              |
| `tune2fs -l /dev/sda2` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ ext2/3/4              | `sudo tune2fs -l /dev/sda2`                                    |
| `stat`                 | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Ñ–∞–π–ª–µ      | `stat /etc/passwd`                                             |
| `df -i`                | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ inode                   | `df -i /`                                                      |

### üîπ –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏/–∫–∞—Ç–∞–ª–æ–≥–∞–º–∏

| –ö–æ–º–∞–Ω–¥–∞         | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                         |
| --------------- | -------------------------------------------------- |
| `ls`            | –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏                         |
| `cd`            | –°–º–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏                                   |
| `pwd`           | –¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è                                 |
| `mkdir`         | –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥                                    |
| `rmdir`         | –£–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç–æ–π –∫–∞—Ç–∞–ª–æ–≥                             |
| `rm -r`         | –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Å —Ñ–∞–π–ª–∞–º–∏                          |
| `cp`            | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤                                 |
| `mv`            | –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ/–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ                         |
| `touch`         | –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| `cat`           | –í—ã–≤–µ—Å—Ç–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞                           |
| `less` / `more` | –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–ª–∏–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤                            |
| `file`          | –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø —Ñ–∞–π–ª–∞                               |

### üîπ –ü—Ä–∞–≤–∞ –∏ –∞—Ç—Ä–∏–±—É—Ç—ã

| –ö–æ–º–∞–Ω–¥–∞  | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                  |
| -------- | ----------------------------------------------------------- |
| `chmod`  | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (rwx, SUID/SGID/sticky)              |
| `chown`  | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞/–≥—Ä—É–ø–ø—ã                                  |
| `chattr` | –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ (immutable, append-only) |
| `ls -l`  | –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∏ SUID/SGID/sticky                    |
| `stat`   | –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∞–≤–∞—Ö –∏ inode                          |
